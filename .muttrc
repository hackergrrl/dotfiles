
# Basic settings {{{

set realname="Stephen Whitmore"

unset mark_old  # Read/unread is good enough

# Check for new mail every 10 seconds.
set mail_check = 10

set fast_reply
set smtp_url

# Wait for sending to finish
set sendmail_wait = 0

set editor="vim"

alternative_order text/plain text/html
auto_view text/html

# }}}

# PGP {{{
# TODO: put this into its own .mutt/gpg.rc file and source it
# set pgp_use_gpg_agent = yes
# set pgp_sign_as = E2701508
# set pgp_timeout = 3600
# set crypt_autosign = yes
# set crypt_replyencrypt = yes
# send-hook "~f foo@bar.com"  set pgp_sign_as=MYFINGERPRINT
# bind compose p pgp-menu
# macro compose P pf "send mail without GPG"
# }}}

# General paths {{{
set mbox_type=Maildir
set folder=$HOME/Mail
set header_cache="~/.mutt/cache/headers"
set message_cachedir="~/.mutt/cache/bodies"
set certificate_file=~/.mutt/certificates
set mailcap_path=~/.mutt/mailcap
# }}}

# Sidebar {{{
# set sidebar_delim = ' |'
# set sidebar_visible = yes
# set sidebar_width = 20
# set sidebar_width = 1
#set status_chars  = " *%A"
#set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"
# color sidebar_new color221 color233
# bind index,pager <down>  sidebar-next
# bind index,pager <up>    sidebar-prev
# bind index,pager <right> sidebar-open
# }}}

# Index view options {{{
set date_format = "%m/%d  %H:%M"
set index_format = "{%2N} [%Z]  %D  %-25.20F  %s"
# }}}

# Custom scoring {{{
# Unread > Flagged > Read
score "~U" 2
score "~F" 1
# }}}

# Mailboxes {{{
#mailboxes Mail/sww@???.com/INBOX \
#          Mail/sww@???.com/Sent \
#          Mail/sww@???.com/Drafts
# }}}

# Index bindings {{{

# Favourite mailboxes
# macro index gi "<change-folder> =sww@???.com/INBOX<enter>" "Go to Inbox"
# macro index gd "<change-folder> =sww@???.com/Drafts<enter>" "Go to Drafts"
# macro index gs "<change-folder> =sww@???.com/Sent<enter>" "Go to Sent"

# Unbind problematic keys
bind index,pager \# noop
bind index i        noop
bind index w        noop

bind index R        group-reply
bind index <tab>    sync-mailbox
bind index k        previous-entry
bind index j        next-entry
bind index gg       first-entry
bind index G        last-entry
bind index \Cp      recall-message
bind index <space>  collapse-thread

macro index U       "l ~U<enter>"
macro index T       "l ~U | ~F<enter>"

# force inbox sync
macro index sI "<shell-escape>/usr/bin/offlineimap<enter>" "Sync Inbox (full)"
macro index si "<shell-escape>/usr/bin/offlineimap -qf INBOX<enter>" "Sync Inbox (quick)"

# notmuch
macro index S "<enter-command>unset wait_key<enter><shell-escape>mutt-notmuch-py<enter><change-folder-readonly>~/.cache/mutt_results<enter>" \

# }}}

# Pager bindings {{{

bind pager i        exit
bind pager /        search
bind pager k        previous-line
bind pager j        next-line
bind pager gg       top
bind pager G        bottom
bind pager R  group-reply

# URL viewing
macro pager \cb <pipe-entry>'urlscan'<enter> 'Follow links with urlscan'

# }}}

# Appearance {{{
set markers=no
set pager_index_lines=15
set sort='threads'
set sort_aux='reverse-last-date-received'

# Highlight messages sent explicitly (or CC'd) to me differently
#color index color205 color233 "~t sww@???.com ~N"
#color index color215 color233 "~c sww@???.com ~N"

source ~/.mutt/badwolf.muttrc
# }}}

#set query_command="$HOME/bin/mutt_ldap_search.pl %s"
